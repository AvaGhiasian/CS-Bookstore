{% extends 'parent/base.html' %}
{% load static %}
{% load blog_tags %}

{% block title %}Ù„ÛŒØ³Øª Ù¾Ø³Øªâ€ŒÙ‡Ø§{% endblock %}

{% block content %}
    <link rel="stylesheet" type="text/css" href="{% static 'blog/css/index.css' %}">

<div class="blog-container">
    <nav class="blog-menu">
        <a href="{% url 'blog:post_list' %}">Ù‡Ù…Ù‡ Ù¾Ø³Øªâ€ŒÙ‡Ø§</a>

        <form action="{% url 'blog:post_search' %}" method="get" class="search-form">
            <input type="text" name="query" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù…ÛŒØ§Ù† Ù¾Ø³Øªâ€ŒÙ‡Ø§..." required>
            <button type="submit"><i class="fas fa-search"></i></button>
        </form>
    </nav>

    <section class="blog-stats">
        <h2>ğŸ“Š Ø¢Ù…Ø§Ø±</h2>
        <p>ØªØ¹Ø¯Ø§Ø¯ Ù¾Ø³Øª: {% total_posts %}</p>
        <p>ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ù…Ù†Øªâ€ŒÙ‡Ø§: {% total_comments %}</p>
        <p>ØªØ§Ø±ÛŒØ® Ø¢Ø®Ø±ÛŒÙ† Ù¾Ø³Øª: {% latest_post_date %}</p>
    </section>

    <section class="post-list">
    <h2 class="section-title">Ø²Ø¨Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ</h2>
    <p class="section-description">Ù…Ù‚Ø§Ù„Ø§ØªÛŒ Ø¯Ø±Ø¨Ø§Ø±Û€ Ø²Ø¨Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ Ù…Ø®ØªÙ„ÙØŒ Ø­Ø±ÙÙ‡ØŒ Ø­Ù„Ù‚Ù‡ Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒ Ø¢Ù†â€ŒÙ‡Ø§</p>

    <div class="card-grid">
        {% for post in posts %}
            <div class="post-card">
                <div class="post-icon">
                    <img src="{% if post.icon %}{{ post.icon.url }}{% else %}{% static 'blog/images/default-icon.png' %}{% endif %}" alt="{{ post.title }}">
                </div>
                <div class="post-content">
                    <h3><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
                    <p>{{ post.description|truncatechars:80 }}</p>
                    <span class="post-date">{{ post.publish|date:"j F Y" }}</span>
                </div>
            </div>
        {% empty %}
            <p>Ù‡Ù†ÙˆØ² Ù¾Ø³ØªÛŒ Ù…Ù†ØªØ´Ø± Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
        {% endfor %}
    </div>
</section>

    <section class="popular-posts">
        <h2>ğŸ”¥ Ù¾Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ú©Ø§Ù…Ù†Øª</h2>
        <ul>
            {% most_commented_posts as pop_posts %}
            {% for post in pop_posts %}
                <li>
                    <a href="{{ post.get_absolute_url }}">
                        {{ post.title }} ({{ post.comment_count }} Ù†Ø¸Ø±)
                    </a>
                </li>
            {% empty %}
                <li>Ù‡ÛŒÚ† Ù¾Ø³ØªÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</li>
            {% endfor %}
        </ul>
    </section>
</div>
{% endblock %}
